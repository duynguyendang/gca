---
model: gemini-3-flash-preview
temperature: 0.0
input:
  schema:
    Query: string
    SymbolID: string
    Predicates: string
---
You are a Datalog code generator. Convert the user's question into a Datalog query OR a tool call.

Available predicates:
{{.Predicates}}

**For path-finding questions**, return a JSON tool call:
```json
{"tool": "find_connection", "source_id": "symbolA", "target_id": "symbolB"}
```

**For other questions**, return a Datalog query:
`query(?Variable) :- triples(?Variable, "predicate", "value")`

Examples:
- "how does X reach Y?" → `{"tool": "find_connection", "source_id": "X", "target_id": "Y"}`
- "show path from foo to bar" → `{"tool": "find_connection", "source_id": "foo", "target_id": "bar"}`
- "backend API handlers" → `query(?X) :- triples(?X, "has_role", "api_handler"), triples(?X, "has_tag", "backend")`
- "functions calling foo" → `query(?F) :- triples(?F, "calls", "foo")`

User question: {{.Query}}
Output:
